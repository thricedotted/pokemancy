export async function get({ params }) {
  const { side, hexColor } = params

  return {
    headers: {
      'Content-Type': 'image/svg+xml'
    },
    body: svgFill(hexColor, side)
  }
}

function svgFill(hexColor, side) {
  if (side === 'front') {
    return `
  <svg 
      version="1.1"
      baseProfile="full"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xmlns:ev="http://www.w3.org/2001/xml-events"
      viewBox="0 0 180 180"
      width="180" 
      height="180"
      fill="#${hexColor}"
      opacity="0.7"
      >
      <defs>
          <path id="frame" d=" M 8.263 77.293 C 9.812 78.842 9.812 81.367 8.263 82.916 C 7.689 83.49 6.943 83.777 6.14 83.719 C 4.82 83.662 3.845 83.088 3.443 82.113 C 3.099 81.252 3.328 80.276 3.959 79.588 C 4.246 79.301 4.763 79.129 5.222 79.129 C 5.968 79.186 6.484 79.473 6.714 80.047 C 6.886 80.391 6.828 80.85 6.599 81.137 Q 6.484 81.137 7.287 82.227 C 7.976 81.539 8.206 80.449 7.861 79.53 C 7.46 78.498 6.484 77.866 5.222 77.809 C 4.361 77.752 3.558 78.096 2.984 78.67 C 1.951 79.703 1.664 81.194 2.18 82.572 C 2.754 84.006 4.189 84.924 6.025 84.982 C 6.082 84.982 6.14 84.982 6.14 84.982 C 7.287 84.982 8.32 84.58 9.066 83.777 C 11.132 81.711 11.132 78.383 9.066 76.317 L 8.206 75.456 C 4.418 71.669 2.066 66.792 1.377 61.57 C 3.328 65.013 7.058 67.366 11.304 67.366 C 16.411 67.366 20.542 63.234 20.542 58.127 C 20.542 53.996 17.157 50.61 13.026 50.61 C 9.64 50.61 6.886 53.365 6.886 56.75 C 6.886 59.504 9.124 61.8 11.935 61.8 Q 11.911 60.721 11.959 60.733 C 9.688 60.733 8.148 59.084 8.148 56.75 C 8.148 54.053 10.329 51.873 13.026 51.873 C 16.468 51.873 19.28 54.684 19.28 58.127 C 19.28 62.488 15.722 66.103 11.304 66.103 C 5.738 66.103 1.205 61.57 1.205 55.947 L 1.205 30.125 C 8.951 29.781 15.206 23.526 15.55 15.722 L 15.55 15.722 L 15.55 15.722 C 23.297 15.378 29.551 9.124 29.896 1.32 L 55.086 1.32 L 55.832 1.32 C 61.398 1.32 65.931 5.853 65.931 11.419 C 65.931 15.78 62.373 19.395 57.955 19.395 C 54.512 19.395 51.701 16.583 51.701 13.14 C 51.701 10.443 53.881 8.263 56.578 8.263 C 58.474 8.263 60.25 9.592 60.25 11.189 Q 61.2 11.189 61.63 11.17 C 61.63 9.234 59.447 6.943 56.635 6.943 C 53.25 6.943 50.495 9.697 50.495 13.083 C 50.495 17.214 53.881 20.6 58.012 20.6 C 63.119 20.6 67.251 16.468 67.251 11.361 C 67.251 7.23 65.013 3.615 61.742 1.607 C 66.505 2.467 70.923 4.763 74.423 8.263 L 75.284 9.124 C 76.317 10.156 77.637 10.673 79.014 10.673 C 80.334 10.673 81.711 10.156 82.744 9.124 C 83.547 8.32 84.006 7.23 83.949 6.025 C 83.891 4.189 82.973 2.754 81.539 2.18 C 80.219 1.664 78.67 1.951 77.637 2.984 C 77.063 3.558 76.776 4.361 76.776 5.222 C 76.833 6.484 77.465 7.46 78.498 7.861 C 79.416 8.206 80.506 7.976 81.194 7.287 Q 80.104 6.484 80.104 6.599 C 79.76 6.828 79.358 6.828 79.014 6.714 C 78.498 6.484 78.153 5.968 78.096 5.222 C 78.096 4.763 78.268 4.304 78.555 3.959 C 79.186 3.328 80.219 3.099 81.08 3.443 C 82.055 3.845 82.629 4.82 82.686 6.14 C 82.686 6.943 82.399 7.746 81.883 8.263 C 80.334 9.812 77.809 9.812 76.202 8.263 L 75.342 7.402 C 70.579 2.64 64.21 0 57.496 0 L 55.832 0 L 55.086 0 L 28.691 0 L 28.691 0.631 C 28.691 7.976 22.895 14.001 15.608 14.345 L 15.608 0.115 L 0 0.115 L 0 15.722 L 14.288 15.722 C 13.944 23.01 7.976 28.863 0.631 28.863 L 0 28.863 L 0 56.061 C 0 56.119 0 56.176 0 56.234 L 0 56.234 L 0 58.586 C 0 65.357 2.64 71.669 7.402 76.432 L 8.263 77.293 Z  M 1.262 1.435 L 14.345 1.435 L 14.345 14.517 L 1.262 14.517 L 1.262 1.435 Z " />

          <path id="pokeball" d=" M 7.809 3.567 C 5.402 3.567 3.443 5.527 3.443 7.933 C 3.443 10.34 5.402 12.299 7.809 12.299 C 10.215 12.299 12.175 10.34 12.175 7.933 C 12.175 5.527 10.215 3.567 7.809 3.567 Z  M 7.809 7.06 C 8.297 7.06 8.682 7.446 8.682 7.933 C 8.682 8.421 8.297 8.806 7.809 8.806 C 7.321 8.806 6.936 8.421 6.936 7.933 C 6.936 7.446 7.321 7.06 7.809 7.06 Z  M 4.316 7.933 L 6.063 7.933 C 6.063 8.894 6.848 9.68 7.809 9.68 C 8.769 9.68 9.555 8.894 9.555 7.933 L 11.302 7.933 C 11.302 9.867 9.743 11.426 7.809 11.426 C 5.875 11.426 4.316 9.867 4.316 7.933 Z " />

          <path id="frame-bottom" d=" M 8.263 7.689 C 9.812 6.14 9.812 3.615 8.263 2.066 C 7.689 1.492 6.943 1.205 6.14 1.262 C 4.82 1.32 3.845 1.894 3.443 2.869 C 3.099 3.73 3.328 4.705 3.959 5.394 C 4.246 5.681 4.763 5.853 5.222 5.853 C 5.968 5.796 6.484 5.509 6.714 4.935 C 6.886 4.59 6.828 4.131 6.599 3.845 Q 6.484 3.845 7.287 2.754 C 7.976 3.443 8.206 4.533 7.861 5.451 C 7.46 6.484 6.484 7.115 5.222 7.173 C 4.361 7.23 3.558 6.886 2.984 6.312 C 1.951 5.279 1.664 3.787 2.18 2.41 C 2.754 0.975 4.189 0.057 6.025 0 C 6.082 0 6.14 0 6.14 0 C 7.287 0 8.32 0.402 9.066 1.205 C 11.132 3.271 11.132 6.599 9.066 8.665 L 8.206 9.525 C 4.418 13.312 2.066 18.19 1.377 23.412 C 3.328 19.969 7.058 17.616 11.304 17.616 C 16.411 17.616 20.542 21.747 20.542 26.854 C 20.542 30.986 17.157 34.371 13.026 34.371 C 9.64 34.371 6.886 31.617 6.886 28.232 C 6.886 25.477 9.124 23.182 11.935 23.182 Q 11.911 24.26 11.959 24.248 C 9.688 24.248 8.148 25.898 8.148 28.232 C 8.148 30.928 10.329 33.109 13.026 33.109 C 16.468 33.109 19.28 30.297 19.28 26.854 C 19.28 22.493 15.722 18.878 11.304 18.878 C 5.738 18.878 1.205 23.412 1.205 29.035 L 1.205 54.856 C 8.951 55.201 15.206 61.455 15.55 69.259 L 15.55 69.259 L 15.55 69.259 C 23.297 69.603 29.551 75.858 29.896 83.662 L 83.98 83.662 L 83.98 84.982 L 28.691 84.982 L 28.691 84.35 C 28.691 77.006 22.895 70.981 15.608 70.636 L 15.608 84.867 L 0 84.867 L 0 69.259 L 14.288 69.259 C 13.944 61.972 7.976 56.119 0.631 56.119 L 0 56.119 L 0 28.92 C 0 28.863 0 28.805 0 28.748 L 0 28.748 L 0 26.395 C 0 19.624 2.64 13.312 7.402 8.55 L 8.263 7.689 Z  M 1.262 83.547 L 14.345 83.547 L 14.345 70.464 L 1.262 70.464 L 1.262 83.547 Z " />

          <path id="pokeball-bottom" d=" M 7.809 72.682 C 5.402 72.682 3.443 74.642 3.443 77.048 C 3.443 79.455 5.402 81.414 7.809 81.414 C 10.215 81.414 12.175 79.455 12.175 77.048 C 12.175 74.642 10.215 72.682 7.809 72.682 Z  M 7.809 76.175 C 8.297 76.175 8.682 76.561 8.682 77.048 C 8.682 77.536 8.297 77.922 7.809 77.922 C 7.321 77.922 6.936 77.536 6.936 77.048 C 6.936 76.561 7.321 76.175 7.809 76.175 Z  M 4.316 77.048 L 6.063 77.048 C 6.063 78.009 6.848 78.795 7.809 78.795 C 8.769 78.795 9.555 78.009 9.555 77.048 L 11.302 77.048 C 11.302 78.983 9.743 80.541 7.809 80.541 C 5.875 80.541 4.316 78.983 4.316 77.048 Z " />

          <g id="corner-top">
              <use xlink:href="#frame" />
              <use xlink:href="#pokeball" />
          </g>

          <g id="corner-bottom">
              <use xlink:href="#frame-bottom" />
              <use xlink:href="#pokeball-bottom" />
          </g>
      </defs>

      <use xlink:href="#corner-top" x="0" y="0" />

      <use xlink:href="#corner-top" x="-180" y="0"
          transform="scale(-1,1)" />

      <use xlink:href="#corner-bottom" x="-180" y="90"
          transform="scale(-1,1)" />
          
      <use xlink:href="#corner-bottom" x="0" y="90"
          transform="scale(1,1)" />

      <line 
          x1="84" 
          y1="174.35" 
          x2="96" 
          y2="174.35"
          stroke="#${hexColor}"
          stroke-width="1.3"
          />
  </svg>
    `
  } else {
    return `
  <svg 
      version="1.1"
      baseProfile="full"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xmlns:ev="http://www.w3.org/2001/xml-events"
      viewBox="0 0 180 180"
      width="180" 
      height="180"
      fill="#${hexColor}"
      opacity="0.7"
      >
      <defs>
          <path id="frame" d=" M 8.263 77.293 C 9.812 78.842 9.812 81.367 8.263 82.916 C 7.689 83.49 6.943 83.777 6.14 83.719 C 4.82 83.662 3.845 83.088 3.443 82.113 C 3.099 81.252 3.328 80.276 3.959 79.588 C 4.246 79.301 4.763 79.129 5.222 79.129 C 5.968 79.186 6.484 79.473 6.714 80.047 C 6.886 80.391 6.828 80.85 6.599 81.137 Q 6.484 81.137 7.287 82.227 C 7.976 81.539 8.206 80.449 7.861 79.53 C 7.46 78.498 6.484 77.866 5.222 77.809 C 4.361 77.752 3.558 78.096 2.984 78.67 C 1.951 79.703 1.664 81.194 2.18 82.572 C 2.754 84.006 4.189 84.924 6.025 84.982 C 6.082 84.982 6.14 84.982 6.14 84.982 C 7.287 84.982 8.32 84.58 9.066 83.777 C 11.132 81.711 11.132 78.383 9.066 76.317 L 8.206 75.456 C 4.418 71.669 2.066 66.792 1.377 61.57 C 3.328 65.013 7.058 67.366 11.304 67.366 C 16.411 67.366 20.542 63.234 20.542 58.127 C 20.542 53.996 17.157 50.61 13.026 50.61 C 9.64 50.61 6.886 53.365 6.886 56.75 C 6.886 59.504 9.124 61.8 11.935 61.8 Q 11.911 60.721 11.959 60.733 C 9.688 60.733 8.148 59.084 8.148 56.75 C 8.148 54.053 10.329 51.873 13.026 51.873 C 16.468 51.873 19.28 54.684 19.28 58.127 C 19.28 62.488 15.722 66.103 11.304 66.103 C 5.738 66.103 1.205 61.57 1.205 55.947 L 1.205 30.125 C 8.951 29.781 15.206 23.526 15.55 15.722 L 15.55 15.722 L 15.55 15.722 C 23.297 15.378 29.551 9.124 29.896 1.32 L 55.086 1.32 L 55.832 1.32 C 61.398 1.32 65.931 5.853 65.931 11.419 C 65.931 15.78 62.373 19.395 57.955 19.395 C 54.512 19.395 51.701 16.583 51.701 13.14 C 51.701 10.443 53.881 8.263 56.578 8.263 C 58.474 8.263 60.25 9.592 60.25 11.189 Q 61.2 11.189 61.63 11.17 C 61.63 9.234 59.447 6.943 56.635 6.943 C 53.25 6.943 50.495 9.697 50.495 13.083 C 50.495 17.214 53.881 20.6 58.012 20.6 C 63.119 20.6 67.251 16.468 67.251 11.361 C 67.251 7.23 65.013 3.615 61.742 1.607 C 66.505 2.467 70.923 4.763 74.423 8.263 L 75.284 9.124 C 76.317 10.156 77.637 10.673 79.014 10.673 C 80.334 10.673 81.711 10.156 82.744 9.124 C 83.547 8.32 84.006 7.23 83.949 6.025 C 83.891 4.189 82.973 2.754 81.539 2.18 C 80.219 1.664 78.67 1.951 77.637 2.984 C 77.063 3.558 76.776 4.361 76.776 5.222 C 76.833 6.484 77.465 7.46 78.498 7.861 C 79.416 8.206 80.506 7.976 81.194 7.287 Q 80.104 6.484 80.104 6.599 C 79.76 6.828 79.358 6.828 79.014 6.714 C 78.498 6.484 78.153 5.968 78.096 5.222 C 78.096 4.763 78.268 4.304 78.555 3.959 C 79.186 3.328 80.219 3.099 81.08 3.443 C 82.055 3.845 82.629 4.82 82.686 6.14 C 82.686 6.943 82.399 7.746 81.883 8.263 C 80.334 9.812 77.809 9.812 76.202 8.263 L 75.342 7.402 C 70.579 2.64 64.21 0 57.496 0 L 55.832 0 L 55.086 0 L 28.691 0 L 28.691 0.631 C 28.691 7.976 22.895 14.001 15.608 14.345 L 15.608 0.115 L 0 0.115 L 0 15.722 L 14.288 15.722 C 13.944 23.01 7.976 28.863 0.631 28.863 L 0 28.863 L 0 56.061 C 0 56.119 0 56.176 0 56.234 L 0 56.234 L 0 58.586 C 0 65.357 2.64 71.669 7.402 76.432 L 8.263 77.293 Z  M 1.262 1.435 L 14.345 1.435 L 14.345 14.517 L 1.262 14.517 L 1.262 1.435 Z " />

          <path id="pokeball" d=" M 7.809 3.567 C 5.402 3.567 3.443 5.527 3.443 7.933 C 3.443 10.34 5.402 12.299 7.809 12.299 C 10.215 12.299 12.175 10.34 12.175 7.933 C 12.175 5.527 10.215 3.567 7.809 3.567 Z  M 7.809 7.06 C 8.297 7.06 8.682 7.446 8.682 7.933 C 8.682 8.421 8.297 8.806 7.809 8.806 C 7.321 8.806 6.936 8.421 6.936 7.933 C 6.936 7.446 7.321 7.06 7.809 7.06 Z  M 4.316 7.933 L 6.063 7.933 C 6.063 8.894 6.848 9.68 7.809 9.68 C 8.769 9.68 9.555 8.894 9.555 7.933 L 11.302 7.933 C 11.302 9.867 9.743 11.426 7.809 11.426 C 5.875 11.426 4.316 9.867 4.316 7.933 Z " />

          <g id="corner-top">
              <use xlink:href="#frame" />
              <use xlink:href="#pokeball" />
          </g>

          <g id="corner-bottom">
              <use xlink:href="#frame" />
              <use xlink:href="#pokeball"
                  transform="scale(1, -1)" 
                  x="0" y="-16" />
          </g>
      </defs>

      <use xlink:href="#corner-top" x="0" y="0" />

      <use xlink:href="#corner-top" x="-180" y="0"
          transform="scale(-1,1)" />

      <use xlink:href="#corner-bottom" x="-180" y="-180"
          transform="scale(-1,-1)" />
          
      <use xlink:href="#corner-bottom" x="0" y="-180"
          transform="scale(1,-1)" />
  </svg>

    `
  }
}
